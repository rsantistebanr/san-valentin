<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>San Valent√≠n üíñ</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#1a0b2e;
      --card:rgba(255,255,255,.08);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.72);
      --pink:#ff4da6;
      --red:#ff2d55;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      min-height:100vh;
      overflow-x:hidden;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(255,77,166,.25), transparent 55%),
        radial-gradient(1000px 700px at 90% 20%, rgba(255,45,85,.20), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }
    .wrap{max-width:820px;margin:0 auto;padding:22px 16px 70px;}
    .pill{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:999px;
      background:rgba(255,255,255,.07);
      border:1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
      user-select:none;
    }
    header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px;}
    .card{
      background:var(--card);
      border:1px solid rgba(255,255,255,.12);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .screen{
      padding:18px;
      display:none;
      animation: fadeIn .25s ease forwards;
    }
    .screen.active{display:block;}
    @keyframes fadeIn{ from{opacity:0; transform: translateY(8px) scale(.99)} to{opacity:1; transform:none} }

    .media{
        max-width: 300px!important;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.18);
    }
    .media img{
      display:block;
      width:100%;
      height:min(42vh, 320px);
      object-fit:cover;
    }

    h1{
      margin:14px 0 6px;
      font-size: clamp(22px, 4vw, 34px);
      letter-spacing:-.3px;
    }
    p{margin:0 0 12px; color:var(--muted); line-height:1.45;}

    .controls{display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin-top:10px;}
    button{
      appearance:none;
      border:0;
      color:var(--text);
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.12);
      padding:10px 14px;
      border-radius:14px;
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      font-weight:700;
    }
    button:hover{ transform: translateY(-1px); background:rgba(255,255,255,.13); border-color: rgba(255,255,255,.18); }
    button:active{ transform: translateY(1px) scale(.99); }
    .yes{ background: linear-gradient(90deg, rgba(255,77,166,.95), rgba(255,45,85,.90)); border-color: rgba(255,255,255,.18); }
    .no{ background: rgba(255,255,255,.10); }
    .more{ background: rgba(255,209,102,.18); border-color: rgba(255,209,102,.25); }

    /* Corazones */
    .heart{
      position:fixed;
      left:0; top:0;
      width:14px; height:14px;
      transform: translate(-50%,-50%) rotate(45deg);
      background: rgba(255,77,166,.85);
      pointer-events:none;
      z-index:5;
      filter: drop-shadow(0 8px 18px rgba(255,77,166,.35));
    }
    .heart:before, .heart:after{
      content:"";
      position:absolute;
      width:14px; height:14px;
      background: inherit;
      border-radius:50%;
    }
    .heart:before{ left:-7px; top:0; }
    .heart:after{ top:-7px; left:0; }

    /* Modal Libro */
    .modal{
      position:fixed; inset:0;
      background: rgba(0,0,0,.65);
      display:none;
      align-items:center;
      justify-content:center;
      padding:16px;
      z-index:50;
    }
    .modal.open{display:flex;}
    .modalCard{
      width:min(980px, 100%);
      border-radius:22px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(10,10,20,.88);
      backdrop-filter: blur(12px);
      box-shadow: 0 25px 90px rgba(0,0,0,.55);
      position:relative;
      animation: pop .2s ease forwards;
    }
    @keyframes pop{ from{opacity:0; transform: translateY(10px) scale(.98)} to{opacity:1; transform:none} }
    .modalTop{
      display:flex; justify-content:space-between; align-items:center;
      gap:10px; padding:12px 12px; border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalTop b{letter-spacing:.2px}
    .close{
      border-radius:999px;
      padding:10px 12px;
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.12);
    }

    /* Flipbook simple */
    .bookWrap{
      padding:14px;
      display:grid;
      gap:12px;
    }
    .book{
      position:relative;
      width:min(900px, 100%);
      margin:0 auto;
      aspect-ratio: 16 / 9;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(700px 420px at 50% 30%, rgba(255,77,166,.15), transparent 60%),
        rgba(0,0,0,.25);
    }
    .page{
      position:absolute;
      inset:0;
      display:grid;
      grid-template-columns: 1fr 1fr;
    }
    .sheet{
      position:relative;
      overflow:hidden;
      border-right:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
    }
    .sheet:last-child{ border-right:0; border-left:1px solid rgba(255,255,255,.08); }
    .sheet img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      filter:saturate(1.05) contrast(1.02);
    }
    .pageNum{
      position:absolute;
      bottom:10px;
      left:50%;
      transform:translateX(-50%);
      font-size:12px;
      color:rgba(255,255,255,.65);
      background:rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.10);
      padding:6px 10px;
      border-radius:999px;
      backdrop-filter: blur(8px);
    }
    .bookControls{
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .hint{ text-align:center; color:rgba(255,255,255,.68); font-size:12px; margin-top:2px; }

    footer{margin-top:14px; color:rgba(255,255,255,.6); font-size:12px; text-align:center;}
  </style>
  <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="pill">üíå <b>14 de Febrero</b> <span style="opacity:.75">‚Äî para ti</span></div>
      <div class="pill" id="clock">üïí</div>
    </header>

    <main class="card">

      <!-- SCREEN 1 -->
      <section class="screen active" id="s1">
       <div class="media tenor-gif-embed" data-postid="11414153051455341817" data-share-method="host" data-aspect-ratio="0.96789" data-width="100%"><a href="https://tenor.com/view/nailong-yellow-dino-yellow-dragon-gif-11414153051455341817">Nailong Yellow Dino GIF</a>from <a href="https://tenor.com/search/nailong-gifs">Nailong GIFs</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
        <h1>¬øFio, quieres ser mi San Valent√≠n? üíò</h1>
        <p>(Responde con sinceridad‚Ä¶ pero pi√©nsalo bien üòå)</p>
        <div class="controls">
          <button class="yes" data-answer="yes">S√≠ üíñ</button>
          <button class="no" data-answer="no">Uy no! üòÖ</button>
        </div>
      </section>
<!--       <div class="" data-postid="14907431710915501229" data-share-method="host" data-aspect-ratio="1.23226" data-width="100%">
        </div> 
         -->

      <!-- SCREEN 2 -->
      <section class="screen" id="s2">
        <div class="media"><img src="https://media1.tenor.com/m/fwo4vgZMu-sAAAAd/nailong-nailong-crying.gif" 
            alt="Dino llorando"></div>
        <h1>¬øSegur@? ü•∫</h1>
        <p>O sea‚Ä¶ pi√©nsalo otra vez üëÄ</p>
        <div class="controls">
          <button class="yes" data-answer="yes">S√≠ üíñ</button>
          <button class="no" data-answer="no">No üò¨</button>
        </div>
      </section>
      <!-- SCREEN 3 -->
      <section class="screen" id="s3">
        <div class="media tenor-gif-embed" data-postid="1548139012361920604" data-share-method="host" data-aspect-ratio="1" data-width="100%"><a href="https://tenor.com/view/naloong-naloong-meme-naloong-toy-yellonw-toy-yellow-dragon-toy-gif-1548139012361920604">Naloong Naloong Meme GIF</a>from <a href="https://tenor.com/search/naloong-gifs">Naloong GIFs</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
        <h1>√öltima oportunidad üò§</h1>
        <p>Luego no digas que no avis√©‚Ä¶</p>
        <div class="controls">
          <button class="yes" data-answer="yes">S√≠ üíñ</button>
          <button class="no" data-answer="no">No üò≠</button>
        </div>
      </section>
      <!-- SCREEN 4 -->
      <section class="screen" id="s4">
        <div class="media tenor-gif-embed" data-postid="14713437061066074768" data-share-method="host" data-aspect-ratio="1" data-width="100%"><a href="https://tenor.com/view/yellow-dragon-nailong-gif-14713437061066074768">Yellow Dragon Nailong GIF</a>from <a href="https://tenor.com/search/yellow+dragon-gifs">Yellow Dragon GIFs</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
        <h1>Uy qu√© f√°cil üòè</h1>
        <p>Ya sab√≠a üíò</p>
        <div class="controls">
          <button class="more" id="btnMore">Hay algo m√°s‚Ä¶ ¬øquieres ver? üìñ‚ú®</button>
          <button id="btnRestart">Volver al inicio ‚Ü©Ô∏è</button>
        </div>
      </section>

    </main>

  </div>

  <!-- MODAL LIBRO -->
  <div class="modal" id="bookModal" aria-hidden="true">
    <div class="modalCard">
      <div class="modalTop">
        <b>üìñ Nuestro librito</b>
        <button class="close" id="closeBook">‚úï</button>
      </div>

      <div class="bookWrap">
        <div class="book" id="book">
          <div class="page" id="page">
            <div class="sheet"><img id="leftImg" src="" alt="P√°gina izquierda"></div>
            <div class="sheet"><img id="rightImg" src="" alt="P√°gina derecha"></div>
          </div>
          <div class="pageNum" id="pageNum">P√°gina</div>
        </div>

        <div class="bookControls">
          <button id="prevPage">‚¨ÖÔ∏è Anterior</button>
          <button id="nextPage">Siguiente ‚û°Ô∏è</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== Reloj =====
    const clock = document.getElementById('clock');
    const pad = n => String(n).padStart(2,'0');
    function tick(){
      const d = new Date();
      clock.textContent = `üïí ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;
    }
    tick(); setInterval(tick, 1000);

    // ===== Corazones =====
    function spawnHeart(x, y, scale=1){
      const h = document.createElement('div');
      h.className = 'heart';
      h.style.left = x + 'px';
      h.style.top = y + 'px';
      h.style.transform = `translate(-50%,-50%) rotate(45deg) scale(${scale})`;

      const drift = (Math.random()*2-1) * 140;
      const rise  = 380 + Math.random()*240;
      const dur   = 1200 + Math.random()*900;

      h.animate([
        { transform: `translate(-50%,-50%) rotate(45deg) scale(${scale})`, opacity: 0 },
        { transform: `translate(calc(-50% + ${drift*0.2}px), calc(-50% - ${rise*0.25}px)) rotate(45deg) scale(${scale*1.02})`, opacity: 1, offset: 0.15 },
        { transform: `translate(calc(-50% + ${drift}px), calc(-50% - ${rise}px)) rotate(45deg) scale(${scale*0.92})`, opacity: 0 }
      ], { duration: dur, easing: 'cubic-bezier(.2,.8,.2,1)' });

      document.body.appendChild(h);
      setTimeout(()=> h.remove(), dur+50);
    }
    function burstHearts(n=14){
      const cx = innerWidth * 0.5;
      const cy = innerHeight * 0.28;
      for(let i=0;i<n;i++){
        spawnHeart(
          cx + (Math.random()*2-1)*160,
          cy + (Math.random()*2-1)*70,
          0.9 + Math.random()*0.9
        );
      }
    }
    window.addEventListener('pointerdown', (e)=> spawnHeart(e.clientX, e.clientY, 0.9 + Math.random()*0.8));
    burstHearts(10);

    // ===== Pantallas (l√≥gica que pediste) =====
    const screens = ['s1','s2','s3','s4'].map(id => document.getElementById(id));
    let noCount = 0;

    function showScreen(n){
      screens.forEach(s => s.classList.remove('active'));
      document.getElementById('s' + n).classList.add('active');
      burstHearts(12);
    }

    function handleAnswer(ans){
      if (ans === 'yes'){
        showScreen(4);
        return;
      }
      // Si es NO
      noCount++;
      if (noCount === 1) showScreen(2);
      else if (noCount === 2) showScreen(3);
      else showScreen(3); // si insiste en no, se queda en la 3
    }

    document.querySelectorAll('[data-answer]').forEach(btn=>{
      btn.addEventListener('click', ()=> handleAnswer(btn.dataset.answer));
    });

    document.getElementById('btnRestart').addEventListener('click', ()=>{
      noCount = 0;
      showScreen(1);
    });

    // ===== Libro con fotos predeterminadas =====
    // üëâ Aqu√≠ defines tus fotos del libro. Solo agrega/borra l√≠neas.
    const bookPhotos = [
      'assets/book/01.jpg',
      'assets/book/02.jpg',
      'assets/book/03.jpg',
      'assets/book/04.jpg',
      'assets/book/05.jpg',
      'assets/book/06.jpg',
      'assets/book/07.jpg',
      'assets/book/08.jpg',
      'assets/book/09.jpg',
      'assets/book/10.jpg',
      'assets/book/11.jpg',
      'assets/book/12.jpg',
      'assets/book/13.jpg',
      'assets/book/14.jpg',
      'assets/book/15.jpg',
    ];

    const bookModal = document.getElementById('bookModal');
    const closeBook = document.getElementById('closeBook');
    const btnMore = document.getElementById('btnMore');
    const leftImg = document.getElementById('leftImg');
    const rightImg = document.getElementById('rightImg');
    const pageNum = document.getElementById('pageNum');
    const prevPage = document.getElementById('prevPage');
    const nextPage = document.getElementById('nextPage');

    // pageIndex avanza de 2 en 2 (izq/der)
    let pageIndex = 0;

    function openBook(){
      bookModal.classList.add('open');
      bookModal.setAttribute('aria-hidden', 'false');
      renderBook();
      burstHearts(18);
    }
    function closeBookModal(){
      bookModal.classList.remove('open');
      bookModal.setAttribute('aria-hidden', 'true');
    }

    function renderBook(){
      const left = bookPhotos[pageIndex] ?? '';
      const right = bookPhotos[pageIndex + 1] ?? '';
      leftImg.src = left || '';
      rightImg.src = right || '';
      leftImg.style.opacity = left ? '1' : '0';
      rightImg.style.opacity = right ? '1' : '0';

      const totalPages = Math.ceil(bookPhotos.length / 2);
      const current = Math.floor(pageIndex / 2) + 1;
      pageNum.textContent = `P√°ginas ${current} / ${Math.max(1,totalPages)}`;

      prevPage.disabled = pageIndex <= 0;
      nextPage.disabled = pageIndex + 2 >= bookPhotos.length;
      prevPage.style.opacity = prevPage.disabled ? '.5' : '1';
      nextPage.style.opacity = nextPage.disabled ? '.5' : '1';
    }

    prevPage.addEventListener('click', ()=>{
      pageIndex = Math.max(0, pageIndex - 2);
      renderBook();
      burstHearts(8);
    });

    nextPage.addEventListener('click', ()=>{
      pageIndex = Math.min(bookPhotos.length - 1, pageIndex + 2);
      renderBook();
      burstHearts(8);
    });

    btnMore.addEventListener('click', openBook);
    closeBook.addEventListener('click', closeBookModal);
    bookModal.addEventListener('click', (e)=> { if(e.target === bookModal) closeBookModal(); });
    window.addEventListener('keydown', (e)=> { if(e.key === 'Escape') closeBookModal(); });
  </script>
</body>
</html>